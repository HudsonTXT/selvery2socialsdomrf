(window.webpackJsonp=window.webpackJsonp||[]).push([[1],[,function(e,t,n){!function(e){"use strict";var t={app_id:0,app_key:"",sessionKey:"",accessToken:"",sessionSecretKey:"",apiServer:"",widgetServer:"",mobServer:"",baseUrl:"",container:!1,header_widget:""},n={init:!1,ready:!1},o={border:0,position:"fixed",top:0,right:0,bottom:0,left:0,width:"100%",height:"100%",zIndex:1e3,display:"none"},r=k,s=k,i=k;function a(e,t){for(var n=0;n<e.length;n++){var o=e[n];if(o&&(o.startsWith("http://")||o.startsWith("https://")))return r=o,s=void 0,(s=document.createElement("a")).setAttribute("href",r),s.protocol+"//"+s.hostname+"/"}var r,s;return t}function d(){for(var e="",n=0;n<arguments.length;n++){var o=arguments[n];n>0&&(e+="$"),null!=o&&(e+=encodeURIComponent(String(o)))}parent.postMessage("__FAPI__"+e,t.mobServer)}var c=["sig","access_token"];function l(e,n){var o,r=[];for(o in e)e.hasOwnProperty(o)&&r.push(o.toString());r.sort();var s="";for(o=0;o<r.length;o++){var i=r[o];-1==c.indexOf(i)&&(s+=r[o]+"="+e[r[o]])}return w(s=S(s+=n||t.sessionSecretKey))}function u(e){return(e=e||{}).application_key=t.app_key,t.sessionKey?e.session_key=t.sessionKey:e.access_token=t.accessToken,e.format="JSON",e}function p(e,n,o,r){var s={};s.name=e,s.price=n,s.code=o;var i=(r=r||{}).mob_pay_url||t.mobServer;s.application_key=t.app_key,t.sessionKey?s.session_key=t.sessionKey:s.access_token=t.accessToken,s.sig=l(s,t.sessionSecretKey);var a=i+"api/show_payment?";for(var d in s)s.hasOwnProperty(d)&&(a+=d+"="+encodeURIComponent(s[d])+"&");return a}function f(e){if(e.data){var t=JSON.parse(e.data);if(t.call&&t.call.method&&t.result&&t.result.status)switch(t.call.method){case"init":"ok"===t.result.status?(console.log("OK Ads initialization complete"),n.init=!0):(console.log("OK Ads failed to initialize"),n.init=!1);break;case"prepare":"ok"===t.result.status?"ready"===t.result.code&&(console.log("Ad is ready to be shown"),n.ready=!0):(console.log("Ad is not ready to be shown. Status: "+t.result.status+". Code: "+t.result.code),n.ready=!1);break;case"show":n.frame_element.style.display="none","ok"===t.result.status?"complete"===t.result.code&&(console.log("Ad is successfully shown"),n.ready=!1):(console.log("An ad can't be shown. Status: "+t.result.status+". Code: "+t.result.code),n.ready=!1)}}}function y(){return"undefined"!=typeof OKApp&&void 0!==OKApp.isAdsEnabled&&OKApp.isAdsEnabled()}var m=["st.attachment","st.return","st.redirect_uri","st.state"];function h(e,n,o){n=n||{},null!==o&&(n.return=o);var r=[];for(var s in n)r.push(s.toString());r.sort();for(var i="",a=t.widgetServer+"dk?st.cmd="+e+"&st.app="+t.app_id,d=0;d<r.length;d++){var c="st."+r[d],l=n[r[d]];-1!=m.indexOf(c)&&(i+=c+"="+l),a+="&"+c+"="+encodeURIComponent(l)}return a+="&st.signature="+w(i+=t.sessionSecretKey),null!=t.accessToken&&(a+="&st.access_token="+t.accessToken),t.sessionKey&&(a+="&st.session_key="+t.sessionKey),null!==window.open(a)}function w(e){function t(e){for(var t="",n=0;n<=3;n++)t+="0123456789abcdef".charAt(e>>8*n+4&15)+"0123456789abcdef".charAt(e>>8*n&15);return t}function n(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function o(e,t,o,r,s,i){return n((a=n(n(t,e),n(r,i)))<<(d=s)|a>>>32-d,o);var a,d}function r(e,t,n,r,s,i,a){return o(t&n|~t&r,e,t,s,i,a)}function s(e,t,n,r,s,i,a){return o(t&r|n&~r,e,t,s,i,a)}function i(e,t,n,r,s,i,a){return o(t^n^r,e,t,s,i,a)}function a(e,t,n,r,s,i,a){return o(n^(t|~r),e,t,s,i,a)}for(var d=function(e){var t=1+(e.length+8>>6),n=new Array(16*t),o=0;for(o=0;o<16*t;o++)n[o]=0;for(o=0;o<e.length;o++)n[o>>2]|=e.charCodeAt(o)<<o%4*8;return n[o>>2]|=128<<o%4*8,n[16*t-2]=8*e.length,n}(e),c=1732584193,l=-271733879,u=-1732584194,p=271733878,f=0;f<d.length;f+=16){var y=c,m=l,h=u,w=p;c=r(c,l,u,p,d[f],7,-680876936),p=r(p,c,l,u,d[f+1],12,-389564586),u=r(u,p,c,l,d[f+2],17,606105819),l=r(l,u,p,c,d[f+3],22,-1044525330),c=r(c,l,u,p,d[f+4],7,-176418897),p=r(p,c,l,u,d[f+5],12,1200080426),u=r(u,p,c,l,d[f+6],17,-1473231341),l=r(l,u,p,c,d[f+7],22,-45705983),c=r(c,l,u,p,d[f+8],7,1770035416),p=r(p,c,l,u,d[f+9],12,-1958414417),u=r(u,p,c,l,d[f+10],17,-42063),l=r(l,u,p,c,d[f+11],22,-1990404162),c=r(c,l,u,p,d[f+12],7,1804603682),p=r(p,c,l,u,d[f+13],12,-40341101),u=r(u,p,c,l,d[f+14],17,-1502002290),c=s(c,l=r(l,u,p,c,d[f+15],22,1236535329),u,p,d[f+1],5,-165796510),p=s(p,c,l,u,d[f+6],9,-1069501632),u=s(u,p,c,l,d[f+11],14,643717713),l=s(l,u,p,c,d[f],20,-373897302),c=s(c,l,u,p,d[f+5],5,-701558691),p=s(p,c,l,u,d[f+10],9,38016083),u=s(u,p,c,l,d[f+15],14,-660478335),l=s(l,u,p,c,d[f+4],20,-405537848),c=s(c,l,u,p,d[f+9],5,568446438),p=s(p,c,l,u,d[f+14],9,-1019803690),u=s(u,p,c,l,d[f+3],14,-187363961),l=s(l,u,p,c,d[f+8],20,1163531501),c=s(c,l,u,p,d[f+13],5,-1444681467),p=s(p,c,l,u,d[f+2],9,-51403784),u=s(u,p,c,l,d[f+7],14,1735328473),c=i(c,l=s(l,u,p,c,d[f+12],20,-1926607734),u,p,d[f+5],4,-378558),p=i(p,c,l,u,d[f+8],11,-2022574463),u=i(u,p,c,l,d[f+11],16,1839030562),l=i(l,u,p,c,d[f+14],23,-35309556),c=i(c,l,u,p,d[f+1],4,-1530992060),p=i(p,c,l,u,d[f+4],11,1272893353),u=i(u,p,c,l,d[f+7],16,-155497632),l=i(l,u,p,c,d[f+10],23,-1094730640),c=i(c,l,u,p,d[f+13],4,681279174),p=i(p,c,l,u,d[f],11,-358537222),u=i(u,p,c,l,d[f+3],16,-722521979),l=i(l,u,p,c,d[f+6],23,76029189),c=i(c,l,u,p,d[f+9],4,-640364487),p=i(p,c,l,u,d[f+12],11,-421815835),u=i(u,p,c,l,d[f+15],16,530742520),c=a(c,l=i(l,u,p,c,d[f+2],23,-995338651),u,p,d[f],6,-198630844),p=a(p,c,l,u,d[f+7],10,1126891415),u=a(u,p,c,l,d[f+14],15,-1416354905),l=a(l,u,p,c,d[f+5],21,-57434055),c=a(c,l,u,p,d[f+12],6,1700485571),p=a(p,c,l,u,d[f+3],10,-1894986606),u=a(u,p,c,l,d[f+10],15,-1051523),l=a(l,u,p,c,d[f+1],21,-2054922799),c=a(c,l,u,p,d[f+8],6,1873313359),p=a(p,c,l,u,d[f+15],10,-30611744),u=a(u,p,c,l,d[f+6],15,-1560198380),l=a(l,u,p,c,d[f+13],21,1309151649),c=a(c,l,u,p,d[f+4],6,-145523070),p=a(p,c,l,u,d[f+11],10,-1120210379),u=a(u,p,c,l,d[f+2],15,718787259),l=a(l,u,p,c,d[f+9],21,-343485551),c=n(c,y),l=n(l,m),u=n(u,h),p=n(p,w)}return t(c)+t(l)+t(u)+t(p)}function _(e){return"[object Function]"===Object.prototype.toString.call(e)}function g(e){return function(e){return"[object String]"===Object.prototype.toString.call(e)}(e)?e:JSON.stringify(e)}function v(e){var t={},n=e||window.location.search;if(n)for(var o=(n=n.substr(1)).split("&"),r=0;r<o.length;r++){var s=o[r].split("="),i=s[0],a=s[1];a=decodeURIComponent(a.replace(/\+/g," ")),t[i]=a}return t}function S(e){return unescape(encodeURIComponent(e))}function k(){}function b(e){if(e.origin===t.mobServer||e.origin==t.apiServer){var n=e.data.split("$",-1);if(n.length<3)return;var o=(n=n.map(decodeURIComponent))[0];o.startsWith("__FAPI__")&&(o=o.substr("__FAPI__".length)),i(o,n[1],n[2])}}e.init=function(e,n,o){e.oauth=e.oauth||{},r=_(n)?n:k,s=_(o)?o:k;var i=v(e.location_search||window.location.search),d=v(e.location_hash||window.location.hash);if(t.app_id=e.app_id,t.app_key=i.application_key||e.app_key,t.sessionKey=i.session_key,t.accessToken=d.access_token,t.sessionSecretKey=i.session_secret_key||d.session_secret_key,t.apiServer=e.api_server||i.api_server||"https://api.ok.ru/",t.widgetServer=encodeURI(a([e.widget_server,i.widget_server],"https://connect.ok.ru/")),t.mobServer=encodeURI(a([e.mob_server,i.mob_server],"https://m.ok.ru/")),t.baseUrl=t.apiServer+"fb.do",t.header_widget=i.header_widget,t.container=i.container,t.app_id&&t.app_key){if(!i.api_server){if(null==d.access_token&&null==d.error)return void(window.location=t.widgetServer+"oauth/authorize?client_id="+e.app_id+"&scope="+(e.oauth.scope||"VALUABLE_ACCESS")+"&response_type=token&redirect_uri="+(e.oauth.url||window.location.href)+"&layout="+(e.oauth.layout||"a")+"&state="+(e.oauth.state||""));if(null!=d.error)return void s("Error with OAUTH authorization: "+d.error)}window.addEventListener("message",b),r()}else s("Required arguments app_id/app_key not passed")},e.registerCallback=function(e){_(e)&&(i=e)},e.REST={call:function(e,n,o,r){var s;for(s in(n=n||{}).method=e,n=u(n),r&&r.no_session&&(delete n.session_key,delete n.access_token),n)if(n.hasOwnProperty(s)){var i=n[s];"object"==typeof i&&(n[s]=JSON.stringify(i))}if(!r||!r.no_sig){var a=r&&r.app_secret_key?r.app_secret_key:t.sessionSecretKey;n.sig=l(n,a)}var d="";for(s in n)n.hasOwnProperty(s)&&(0!==d.length&&(d+="&"),d+=s+"="+encodeURIComponent(n[s]));return function(e,n,o){var r=new XMLHttpRequest;n?(r.open("POST",t.baseUrl,!0),r.setRequestHeader("Content-type","application/x-www-form-urlencoded")):(r.open("GET",t.baseUrl+"?"+e,!0),r.setRequestHeader("Content-type","application/json")),r.onreadystatechange=function(){if(r.readyState===XMLHttpRequest.DONE){if(!_(o))return;var e;try{e=JSON.parse(r.responseText)}catch(t){e={result:r.responseText}}200!=r.status||e.hasOwnProperty("error_msg")?o("error",null,e):o("ok",e,null)}},r.send(n?e:null)}(d,r&&r.use_post,o)},calcSignature:function(e,t){return l(u(e),t)}},e.Payment={show:function(e,t,n,o){return window.open(p(e,t,n,o))},showInFrame:function(e,t,n,o,r){var s="<iframe 'style='position: absolute; left: 0px; top: 0px; background-color: white; z-index: 9999;' src='"+p(e,t,n,o)+"'; width='100%' height='100%' frameborder='0'></iframe>",i=window.document.getElementById(r);i||((i=window.document.createElement("div")).id=r,document.body.appendChild(i)),i.innerHTML=s,i.style.display="block",i.style.position="fixed",i.style.left="0px",i.style.top="0px",i.style.width="100%",i.style.height="100%"},query:p,closePaymentFrame:function(e){if(window.parent){var t;try{t=window.document.getElementById(e)||window.parent.document.getElementById(e)}catch(e){console.log(e)}t&&(t.innerHTML="",t.style.display="none",t.style.position="",t.style.left="",t.style.top="",t.style.width="",t.style.height="")}}},e.Widgets={getBackButtonHtml:k,post:function(e,t){return(t=t||{}).attachment||(t={attachment:t}),t.attachment=btoa(unescape(encodeURIComponent(g(t.attachment)))),h("WidgetMediatopicPost",t,e)},invite:function(e,t){return h("WidgetInvite",t,e)},suggest:function(e,t){return h("WidgetSuggest",t,e)}},e.Ads={init:function(e,r){if(!n.frame_element){var s,i=document.createElement("iframe"),a=window.frames.length;for(var d in i.id=e||"ok-ads-frame",i.src=(s=w("call_id=1"+t.sessionSecretKey).toString(),t.widgetServer+"dk?st.cmd=WidgetVideoAdv&st.app="+t.app_id+"&st.sig="+s+"&st.call_id=1&st.session_key="+t.sessionKey),o)i.style[d]=o[d];i.style.display="none",document.body.appendChild(i),n.frame_element=i,n.window_frame=window.frames[a];var c=r||f;window.addEventListener("message",c)}},prepareMidroll:function(){n.window_frame?n.window_frame.postMessage(JSON.stringify({method:"prepare",arguments:["midroll"]}),"*"):console.log("Ads are not initialized. Please initialize them first")},showMidroll:function(){n.window_frame?(n.ready||console.log("Ad is not ready. Please make sure ad is ready to be shown"),n.frame_element.style.display="",setTimeout((function(){n.window_frame.postMessage(JSON.stringify({method:"show"}),"*")}),10)):console.log("Ads are not initialized. Please initialize them first")},destroy:function(){n.frame_element&&(n.frame_element.parentNode.removeChild(n.frame_element),OKSDK.Ads.State.init=n.init=!1,OKSDK.Ads.State.ready=n.ready=!1,OKSDK.Ads.State.frame_element=n.frame_element=null,OKSDK.Ads.State.window_frame=n.window_frame=null)},State:n,isNativeAdSupported:y,requestNativeAd:function(){y()&&d("requestNativeAd")},requestManualAd:function(){y()&&d("requestManualAd")},showLoadedAd:function(){y()&&d("showLoadedAd")}},e.Util={md5:w,encodeUtf8:S,decodeUtf8:function(e){return decodeURIComponent(escape(e))},encodeBase64:btoa,decodeBase64:atob,getRequestParameters:v,toString:g,isLaunchedFromOKApp:function(){var e=window.navigator.userAgent;return e&&e.length>=0&&e.indexOf("OkApp")>-1}}}(t)}]]);